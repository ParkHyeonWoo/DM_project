<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.board.mappers.board">
	<select id="champList" resultType="com.board.domain.ChampListDTO">
		select 
			champ_id, champ_name, champ_name_kr
		from
			champ_basic_info
		order by champ_name_kr
	</select>
	<select id="chamDetail" resultType="com.board.domain.ChamDetailDTO">
		select
			championid, championname, championkrname, lane, win_rate, pick_rate, ban_rate
		from (
			select
				championid, championname, championkrname, lane, win_rate, pick_rate, ban_rate
			from
				test_champ_info
			where
				championid = #{req}
			order by 
				pick_rate
			desc
		)
		<![CDATA[where rownum <= 2]]> 		
	</select>
	
	<select id="runes" resultType="com.board.domain.RunesDTO">
		select 
			mainrunes, subrunes, win_rate, pick_rate 
		from (
			select 
				mainrunes, subrunes, win_rate, pick_rate 
			from 
				runes 
			where 
				championid = #{chamId} and lane = #{lane} 
			order by 
				pick_rate 
			desc
		) 
		<![CDATA[where rownum = 1]]>
			
	</select>
	
	<select id="runeInfo" resultType="com.board.domain.RuneInfoDTO">
		select
			rune_id, rune_name, rune_name_kr, rune_desc
		from
			runes_info
		where
			rune_id = #{req}
	</select>
	
	
	<select id="tierList" resultType="com.board.domain.TierListDTO">
		select
			championid, championname, championkrname, championtier, lane, win_rate, pick_rate, ban_rate, lane_win_rate 
		from 
			test_champ_info
		where lane= #{req}
		order by win_rate desc
	</select>
</mapper>